# PostViewer

## Содержание
* [Описание](#Описание)
* [Отклонения от требований](#Отклонения-от-требований)
* [Установка](#Установка)
* [Если не работает авторизовация через VK](#Если-не-удалось-авторизоваться-через-vk)
* [Основные экраны (они же модули)](#Основные-экраны-они-же-модули)
* [SplashScreen](#splashscreen)
* [Authorization](#authorization)
* [PostsList](#postslist)
* [PostDetail](#postdetail)
* [Сильные и слабые стороны приложения](#Сильные-и-слабые-стороны-приложения)
* [Использованные библиотеки](#Использованные-библиотеки)

### Описание
[Оригинальное тестовое задание от Flatstack](https://github.com/fs/test-tasks/blob/master/ios/README.md)
Выполнено на Swift + VIPER;

### Отклонения от требований

* iOS 10.0+
* Отображаются не только посты с картинками
* Используется SwiftyVK (оптимизирован под Swift, работает с VK.API 5.69)

### Установка

Должно быть достаточно просто сделать `git clone`, хотя не уверен насчёт `app id` у ВКонтакте.

#### Если не работает авторизовация через VK

1) нужно создать тестовое приложение [вот здесь](https://vk.com/apps?act=manage) (standalone приложение)
2) в настройках ввести свой `App Bundle ID для iOS`
3) ID приложения (в виде `1234567`) скопировать и вставить:
1) В URL Types в виде `vk1234567` вместо уже имеющегося
2) В info.plist изменить одно из значений под ключом `LSApplicationQueriesSchemes`
3) В файле `VKDelegate.swift` изменить appId на тот же id приложения :)

### Основные экраны (они же модули):

* SplashScreen - сплэш скрин, исчезает после загрузки
* Authorization - экран авторизации
* PostsList - экран списка постов.
* PostDetail - экран подробного просмотра

#### SplashScreen
Ничего особенного

#### Authorization
Экран с кнопкой "Authorize with VK";
Нажатие на кнопку по желанию перенесёт  в приложение или может отобразить web view;
При неудаче отображает ошибку.

#### PostsList
Отображает UITableView с ячейками - постами. В постах из содержимого отображаются только картинки (текст не хотел добавлять, ибо слишком высокими могут быть ячейки, а делать "показать больше" времени не было);
Для расположения картинок используется кастомный класс `ImagesLayoutView`; отображает картинки как плитки 2/1, 2/2, 1/2, предварительно высчитывая лучшую комбинацию (2 или 3 картинки в строчке);
При тапе на ячейку открывается страница `PostDetail`;
Есть Pull to refresh и пагинация; Есть кнопка Log out.

#### PostDetail
Детальное отображение поста, с текстом и картинками; Можно ставить лайк посту; В целом, ничего интересного;
Есть Pull to refresh

### Сильные и слабые стороны приложения
Слабые стороны:
* Layout с багами (конфликты в constraints)
* Так как приложение слишком маленькое, VIPER может здесь показаться неуместным.

Сильные стороны:
* Проблема с Layout фиксится :)
* Расширяемость

### Использованные библиотеки
* SwiftyVK
* SDWebImage
